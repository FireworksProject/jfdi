server {
  <% if node['local_box'] %>
  listen 8016;
  <% else %>
  server_name   fireworksproject.com www.fireworksproject.com;
  <% end %>

  root      /webapps/fireworksproject_com/public;
  index     index.html;

  add_header "X-UA-Compatible" "IE=Edge,chrome=1";

  # Cache static files for as long as possible
  location ~* \.(?:ogg|mp3|mp4|ogv|svg|svgz|eot|otf|woff|ttf|css|js|jpg|jpeg|gif|png|ico)$ {
    try_files $uri =404;
    <% if !node['local_box'] %>
    expires max;
    <% end %>
    access_log off;
    add_header Pragma public;
    add_header Cache-Control "public, must-revalidate, proxy-revalidate";
  }

  # Favicon
  location ~* \.ico$ {
    expires 1w;
    add_header Cache-Control "public";
  }

  # deny access to any hidden files starting with ".", eg. .htaccess .git, etc
  location ~ /\. {
    deny all;
    return 404;
    log_not_found off;
  }
}
